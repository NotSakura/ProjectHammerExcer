---
title: "My title"
author: 
  - Shreya Sakura Noskor
  - Khushaal Nandwani
  - Prankit Bhardwaj
  - Veyasan Ragulan
thanks: "Code and data are available at: [https://github.com/NotSakura/ProjectHammerExcer.git](https://github.com/NotSakura/ProjectHammerExcer.git)."
date: today
date-format: long
abstract: "We look at the average price of leek and garlic, from June 2024 to November 2024. We find that "
format: pdf
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)

```

  
# Introduction

Canadian grocery prices have skyrocketed in the past few years, often surpassing inflation (@foodinflation). This paper looks at key products provided by the big 8 vendors, and finds the most to least expensive deals. Current prices are also compared to previous records to see trends across vendors in these products.

# Data
We got the data from https://jacobfilipp.com/hammer/ in the form of sqlite database. We selected to analyze Garlic and Leeks because it was available in different vendors with the same name. Average price was taken for the current price per month for every vendor and a table was created for the same. This table was then converted into a .csv file to analyze in R using Python, where the script for it can be found in /scripts/export.py.

The data comes from Project Hammer, whose goal is "to drive competition and reduce collusion in the Canadian grocery sector." (\@project_hammer). The author, Jacob Filippa, looked at 8 vendors in Canada, scraping prices off their websites.Prices are updated regularly from Feb 28 2024 onwards. The data is stored in a SQL database, which contains 3 tables, `product`, `raw`, and `sqlite_stat1`. `product` contains all relevant product information


SQL was used for data manupilation because it can handle larger datasets better than CSVs.

```{r}
library(readr)
leek <- read_csv("../data/02-analysis_data/leeks.csv")
garlic <- read_csv("../data/02-analysis_data/garlic.csv")
```


# Results
```{r}
library(ggplot2)
library(dplyr)
leek$Month <- as.Date(paste0(leek$month, "-01"))

# Round the Avg_Price to 2 decimal places
leek$Avg_Price <- round(leek$avg_price, 2)

# Create the plot
ggplot(leek, aes(x = Month, y = Avg_Price, color = vendor, group = vendor)) +
  geom_line(size = 1) +                   # Line graph
  geom_point(size = 3) +                  # Points on the line for visibility
  scale_x_date(date_labels = "%b %Y",     # Format the x-axis as month-year (e.g., Jan 2023)
               date_breaks = "1 month") +  # Set breaks to be 1 month
  labs(title = "Average Price Over Time by Vendor For Leeks",
       x = "Month",
       y = "Average Price (Rounded)",
       color = "Vendor") +                 # Label for the legend
  theme_minimal() +                       # Clean theme
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```


```{r}
garlic$Month <- as.Date(paste0(leek$month, "-01"))

# Round the Avg_Price to 2 decimal places
garlic$Avg_Price <- round(garlic$avg_price, 2)

# Create the plot
ggplot(garlic, aes(x = Month, y = Avg_Price, color = vendor, group = vendor)) +
  geom_line(size = 1) +                   # Line graph
  geom_point(size = 3) +                  # Points on the line for visibility
  scale_x_date(date_labels = "%b %Y",     # Format the x-axis as month-year (e.g., Jan 2023)
               date_breaks = "1 month") +  # Set breaks to be 1 month
  labs(title = "Average Price Over Time by Vendor For Garlic",
       x = "Month",
       y = "Average Price (Rounded)",
       color = "Vendor") +                 # Label for the legend
  theme_minimal() +                       # Clean theme
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```



# Discussion


#Correlation vs. Causation



# Missing data
Project Hammer gets its information by scraping vendor website's for pricing. Vendors have their own APIs to track inventory and pricing across their stores, but these are not made available to the public. This is why on certain days and with certain vendors, the database lacks any information of product pricing, the attempt to scrape for prices on those days failed in some way. Filippa started this database using pricing on a small selection of products. This remained so until sometime in July, where he increased the amount of products he tracked. This means that only a select few products have approximately a year's worth of data available to them. 


# Source of Bias
The prices of garlic and leek in Walmart, Loblaws, and No Frills are used in this analysis. Of the two most significant sources of bias, possibly affecting this analysis, regional pricing and different product varieties stand out. Regional pricing may result in price variation due to a wide range of factors that include transportation cost, local supply and demand, and regional supplier agreements. For instance, prices of garlic and leek for the same vendor may vary between an urban and a rural setting and might make a vendor look more expensive simply because of the regions it operates within in the dataset. Product variety further complicates the comparison, as different vendors can have a variety of garlic and leeks they sell, such as organic, imported, or in bulk. These types often also carry different prices, and if one vendor mainly sells high premium or bulk produce, while another mainly sells regular, single-item offerings, it could skew average price comparisons. Trying to work out these biases by matching the prices within comparable regions and types of garlic and leeks, where possible, would go a long way toward comparison of pricing for each vendor in a far more fair manner.





\newpage


# References


